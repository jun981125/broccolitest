<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>커뮤니티(중고거래)</title>
    <link th:href="@{/css/commu.css}" rel="stylesheet"/>
    <base th:href="@{/}"/>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard-dynamic-subset.css"/>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>


</head>

<body>
<th:block th:replace="~{common/header :: headerFragment}"></th:block>
<div class="container">
    <div class="top">
        <h1>커뮤니티(중고거래)</h1>
        <div class="title-search-container">
            <div class="search-form">
                <form action="/commu/search" method="get" style="display: flex;">
                    <select name="searchName">
                        <option value="customernickname" selected>작성자</option>
                        <option value="title">글제목</option>
                    </select>
                    <div class="textbox" style="flex: 1; margin-right: 10px;">
                        <label for="searchValue"></label>
                        <input type="hidden" name="page" th:value="${page}">
                        <input type="text" name="searchValue" id="searchValue" placeholder="검색어 입력" class="inputtext">
                    </div>
                    <input type="submit" class="material-symbols-outlined" value="search">
                </form>
            </div>
        </div>
    </div>

    <div class="main_list">
        <div class="new_tab_wrap">
            <ul class="style02">
                <li class="basis-200">제목<span class="tab_line"></span></li>
                <li>작성자<span class="tab_line"></span></li>
                <li>작성일<span class="tab_line"></span></li>
                <li>조회수<span class="tab_line"></span></li>
                <li>이미지 여부<span class="tab_line"></span></li>
            </ul>
        </div>

        <a th:each="notice:${alist}" class="card card-content"
           th:href="@{/Adetail(num=${notice.num},page=${page})}">
            <label class="label ttitle">
                <span class="basis-200"><img th:src="@{images/bell.png}" alt="공지사진" width="20" height="20"> [[${notice.title}]]</span>
                &nbsp;
                <span>[[${notice.adminname}]]</span> &nbsp;
                <span class="date" th:text="${notice.cdate}"></span>
                <span>-</span>
                <span th:if="${notice.filename != null}">
					<img th:src="@{images/showimage.png}" alt="이미지" width="25" height="25">
				</span>
                <span th:unless="${notice.filename != null}">
				</span>
            </label>
        </a>
        <div th:if="${isAdmin}">
            <a th:href="@{/deletePost(num=${notice.num})}">삭제</a>
        </div>

        <a th:each="list:${list}" class="card card-content"
           th:href="@{/commudetail(num=${list.num},page=${page})}">
            <label class="label ttitle">
                <span class="basis-200">[[${list.title}]]</span>
                <span th:if="${list.commentcount > 0}">
							(댓글 : <span th:text="${list.commentcount}"></span>)
						</span>
                <span>[[${list.customernickname}]]</span>
                <span>[[${list.cdate}]]</span>
                <span>[[${list.readcnt}]]</span>


                <span th:if="${list.filename != null}">
					<img th:src="@{images/showimage.png}" alt="" width="25" height="25">
				</span>
                <span th:unless="${list.filename != null}">
				</span>
            </label>
        </a>

        <p class="btn_wrap"><a class="button" th:href="@{/insertCommu}">글쓰기</a></p>
        <!-- paging -->
        <tr style="text-align: center;">
            <td colspan="6">
                <th:block th:each="num : ${#numbers.sequence(1, pagesu)}">
                    <th:span th:if="${num} == ${page}">
                        <b th:text=${num}>num 표시</b>
                    </th:span>
                    <th:span th:if="${num} != ${page}">
                        <a th:href="@{commu(page=${num})}" th:text="${num}">num 표시</a>
                    </th:span>
                </th:block>
            </td>
        </tr>
        </th:block>

    </div>
</div>
<p/>

<th:block th:replace="~{common/footer :: footerFragment}"></th:block>

</body>

</html>